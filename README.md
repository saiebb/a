# نظام إدارة الإجازات

نظام شامل لإدارة الإجازات مع ثلاثة أدوار للمستخدمين: موظف، مدير، ومسؤول. يتيح النظام للموظفين عرض وطلب الإجازات، وللمديرين الموافقة/رفض الطلبات وعرض إجازات الفريق، وللمسؤولين إدارة جميع المستخدمين وإعدادات النظام.

## المميزات المنفذة

### المرحلة 1: إعداد المشروع والمصادقة
- [x] تهيئة المشروع بمجموعة التقنيات المناسبة
- [x] إنشاء مخطط قاعدة البيانات
- [x] إعداد نظام المصادقة
- [x] تنفيذ تسجيل المستخدم (الدور الافتراضي هو موظف)
- [x] تنفيذ وظيفة تسجيل الدخول
- [x] إنشاء وظيفة إعادة تعيين كلمة المرور
- [x] إعداد نظام التفويض المستند إلى الأدوار

### المرحلة 2: تطوير لوحة تحكم الموظف
- [x] إنشاء صفحة لوحة تحكم الموظف الرئيسية
- [x] تنفيذ عرض رصيد الإجازات
- [x] إنشاء نموذج طلب الإجازة
- [x] تطوير عرض سجل الإجازات
- [x] تنفيذ تتبع حالة الطلب
- [x] إنشاء صفحة إدارة الملف الشخصي
- [x] إعداد الإشعارات لتغييرات حالة الطلب

### المرحلة 3: تطوير لوحة تحكم المدير
- [x] إنشاء صفحة لوحة تحكم المدير الرئيسية
- [x] تنفيذ نظرة عامة على إجازات الفريق
- [x] إنشاء واجهة الموافقة على الطلبات المعلقة
- [x] تطوير عرض تقويم إجازات الفريق
- [x] تنفيذ تقارير إجازات الفريق
- [x] إعداد الإشعارات لطلبات الإجازة الجديدة

### المرحلة 4: تطوير لوحة تحكم المسؤول
- [x] إنشاء صفحة لوحة تحكم المسؤول الرئيسية مع إحصائيات النظام
- [x] تنفيذ إدارة المستخدمين (عمليات CRUD)
- [x] إنشاء واجهة إدارة الأقسام
- [x] تطوير إدارة الأدوار والصلاحيات
- [ ] تنفيذ تكوين أنواع الإجازات
- [ ] إنشاء أدوات التقارير على مستوى النظام
- [ ] تطوير تكوين إعدادات النظام

### المرحلة 5: الميزات المتقدمة والتحسينات
- [ ] تنفيذ إشعارات البريد الإلكتروني
- [ ] إنشاء وظيفة تصدير البيانات
- [ ] تنفيذ تحليلات لوحة التحكم
- [ ] إنشاء تكامل تقويم الإجازات
- [ ] إضافة إجراءات جماعية للمسؤولين
- [ ] تنفيذ تسجيل المراجعة
- [x] إنشاء تصميم متجاوب للجوال

### ميزات إضافية
- [x] دعم اللغة العربية والإنجليزية
- [x] دعم الوضع الفاتح والداكن
- [x] استخدام خط IBM Plex Sans Arabic للدعم الأمثل للغة العربية

## التقنيات المستخدمة

- **الواجهة الأمامية**: Next.js, React, Tailwind CSS, shadcn/ui
- **قاعدة البيانات**: Supabase (PostgreSQL)
- **المصادقة**: Supabase Auth
- **التعريب**: i18n
- **التخزين**: Supabase Storage

## هيكل قاعدة البيانات

1. **جدول المستخدمين (users)**
   - id (PK)
   - email
   - name
   - created_at
   - updated_at
   - total_vacation_days
   - profile_image_url
   - role
   - manager_id (FK)
   - department_id (FK)

2. **جدول الإجازات (vacations)**
   - id (PK)
   - user_id (FK)
   - vacation_type_id (FK)
   - start_date
   - end_date
   - notes
   - status
   - created_at
   - updated_at
   - admin_note

3. **جدول أنواع الإجازات (vacation_types)**
   - id (PK)
   - name
   - description
   - color
   - icon
   - created_at

4. **جدول الإشعارات (notifications)**
   - id (PK)
   - user_id (FK)
   - message
   - read
   - vacation_id (FK)
   - created_at

5. **جدول تفضيلات المستخدم (user_preferences)**
   - user_id (PK, FK)
   - theme
   - language
   - notifications_enabled
   - calendar_sync_enabled
   - updated_at
   - first_day_of_week
   - include_weekend_days

6. **جدول الأقسام (departments)**
   - id (PK)
   - name
   - description
   - manager_id (FK)
   - created_at
   - updated_at

## ما تم إنجازه مؤخراً

تم إنجاز المهام التالية مؤخراً:

1. **استكمال لوحة تحكم المدير**:
   - تم إنشاء صفحة لوحة تحكم المدير الرئيسية مع عرض إحصائيات الفريق
   - تم تنفيذ واجهة لعرض طلبات الإجازة المعلقة والموافقة عليها أو رفضها
   - تم إنشاء صفحة لعرض أعضاء الفريق وإدارتهم
   - تم إنشاء صفحة لعرض إجازات عضو معين من الفريق
   - تم تنفيذ نظام الإشعارات للموافقة على الإجازات أو رفضها
   - تم إصلاح مشكلة الوصول إلى صفحة المدير للمستخدمين ذوي صلاحيات المدير
   - تم تحسين آلية التحقق من صلاحيات المستخدم للوصول إلى صفحات المدير

2. **إضافة الترجمات**:
   - تمت إضافة ترجمات جديدة للغة العربية والإنجليزية لدعم واجهة المدير
   - تم إصلاح مشكلة الترجمات المفقودة في واجهة المستخدم العربية

3. **تطوير إدارة الأقسام والأدوار**:
   - تم إنشاء جدول للأقسام في قاعدة البيانات
   - تم تطوير واجهة لإدارة الأقسام وإضافتها وتعديلها وحذفها
   - تم تطوير نظام لتعيين المستخدمين للأقسام
   - تم تحسين نظام الأدوار والصلاحيات من خلال تطوير middleware للتحقق من الصلاحيات

4. **تحسين واجهة المستخدم**:
   - تم تطوير تخطيط جديد للوحة تحكم المسؤول لتحسين تجربة المستخدم
   - تم إضافة شريط تنقل علوي للوصول السريع إلى الصفحات المختلفة
   - تم تحسين تنسيق الصفحات لتكون أكثر اتساقاً وسهولة في الاستخدام
   - تم تطوير مكونات جديدة لتحسين الواجهة وتوحيد التصميم

## قيد التنفيذ

نحن حالياً نعمل على تنفيذ المهام التالية:

1. **تنفيذ تكوين أنواع الإجازات**:
   - تطوير واجهة لإدارة أنواع الإجازات
   - إضافة إمكانية تخصيص ألوان وأيقونات لأنواع الإجازات

2. **تحسين نظام الإشعارات**:
   - تنفيذ إشعارات البريد الإلكتروني
   - تحسين نظام الإشعارات داخل التطبيق

3. **تطوير نظام التقارير**:
   - إنشاء تقارير للإجازات حسب القسم
   - إنشاء تقارير للإجازات حسب النوع
   - تطوير إمكانية تصدير التقارير

4. **تنفيذ نظام لتسجيل الأحداث**:
   - تطوير نظام لتسجيل الأحداث والأنشطة للمراجعة والتدقيق
   - إنشاء واجهة لعرض سجل الأحداث

5. **تطوير نظام الموافقات متعدد المستويات**:
   - تنفيذ نظام موافقات متعدد المستويات لطلبات الإجازة
   - تطوير آلية لتحديد مسار الموافقة بناءً على نوع الإجازة ومدتها
   - إنشاء واجهة لإدارة مسارات الموافقة
